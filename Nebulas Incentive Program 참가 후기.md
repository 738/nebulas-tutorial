# Nebulas Incentive Program 참가 후기

## 서문

[네뷸러스(Nebulas)](https://nebulas.io/kr)는 2018년 1분기에 메인넷 Eagle Nebula 1.0을 출시했습니다. 네뷸러스는 블록체인 개발자들이 메인넷 위에서 보다 뛰어난 DApp의 개발을 장려하고 더불어서 네뷸러스 개발 친화적 블록체인 생태계를 구축하기 위해 [Nebulas Incentive Incentive Program 시즌 1](https://nebulas.io/incentive.html)을 2018년 5월 7일부터 7월 2일까지 개최했습니다.

총 상금은 460,000 NAS(2018년 5월 14일 NAS 가격기준, 약 41억4000만원)로 개발자의 눈길을 끌만큼 상금은 매우 컸습니다. 게다가 등수 안에 들지 않고 DApp을 만들기만 해도 100NAS를 New DApp Prize로 지급한다고 해서 프로그램은 꼭 참여해야겠다고 생각했습니다. 그래서 저는 네뷸러스 튜토리얼과 위키를 보면서 DApp 개발을 위한 공부를 시작했습니다.

네뷸러스의 간단한 튜토리얼은 [이전 글 네뷸러스 DApp 개발 튜토리얼]()을 참고하세요.

**편리한 언어 접근성**

네뷸러스의 스마트 컨트랙트 언어는 이더리움의 [Solidity](http://solidity.readthedocs.io/en/v0.4.24/), Viper와는 다르게 기존의 개발자에게 친숙한 Javascript와 Typescript를 지원해서 접근하기가 용이했습니다. 네뷸러스가 제공하는 튜토리얼을 보고 바로 스마트 컨트랙트를 개발할 수 있을 정도로 *Learning Curve*가 짧았습니다. 물론 Solidity만큼의 보안 수준은 기대할 수 없겠습니다.

**아직 많이 부족한 생태계**

네뷸러스 블록체인의 인지도가 많이 없어서 네뷸러스 커뮤니티에 국내 개발자는 거의 찾아볼 수 없었습니다. 아무래도 중국에서 만든 블록체인이라 중국인들의 비중이 압도적이었습니다. 네뷸러스가 여러 바운티 프로그램을 열어서 많은 개발자들이 네뷸러스 DApp 가이드를 작성하고 디버깅 툴을 개발하는 등 많은 참여가 이루어지고 있긴 하지만 확실히 이더리움만큼의 생태계를 구축하기까지는 오랜 시간이 필요할 것으로 보입니다.

## 첫 번째 DApp: Votestagram

제일 처음으로 생각나는 DApp 기획은 투표 어플리케이션이었습니다. 투표야말로 탈중앙화 어플리케이션에 가장 어울리는 것으로 생각했기 때문입니다. 그리고 처음으로 만들기에 간단할 것이라고 생각했습니다. 소스코드는 [여기](https://github.com/JonJee/nebulas-voting)에서 볼 수 있습니다.

### 개발 프로세스

1. `go-nebulas` 설치하여 네뷸러스 로컬 노드 실행 ([이전 글 네뷸러스 DApp 개발 튜토리얼]() 참조)
2. 스마트 컨트랙트 개발
    1. 로컬 노드에 배포
    2. 테스트
    3. 디버깅
3. 웹 프론트엔드 개발

### 스마트 컨트랙트 개발

자바스크립트와 타입스크립트로 모두 스마트 컨트랙트를 개발할 수 있지만 아직 타입스크립트에 대한 문서는 많이 공개되어 있는 상태가 아니여서 저는 자바스크립트로 스마트 컨트랙트 개발을 진행하였습니다. 이더리움의 [Truffle](https://truffleframework.com/)과 같이 편리한 스마트 컨트랙트 개발환경이 있으면 좋겠지만 아직 부재한 것 같습니다.

각각의 투표에 대한 정보를 가지고 있는 `VotingItem` 객체를 생성하고 각각의 투표 아이템들을 관리하는 메인 클래스인 `VotingManager` 객체를 생성했습니다. `VotingManager`는 `LocalContractStorage`에 투표 아이템들을 저장하고, 조회하고, 지우는 등의 역할을 이행합니다.

`VotingManager` 안에 구현해놓은 함수입니다.

```js
// 투표 아이템을 등록
enroll(votingItem) {
    // ...
}

// `id`에 해당하는 투표 아이템을 조회
get(id) {
    // ...
}

// 모든 투표 아이템을 조회
getVotingList() {
    // ...
}

// `id`에 해당하는 투표 아이템의 `index`에 투표
vote(id, index) {
    // ...
}

// 투표 아이템을 등록한 유저가 투표 아이템을 제거
delete(id) {
    // ...
}
```

### [`neb.js`](https://github.com/nebulasio/neb.js), [`nebPay.js`](https://github.com/nebulasio/nebPay) 사용하여 웹 클라이언트에서 스마트 컨트랙트와 상호작용하기

네뷸러스의 `neb.js`, `nebPay.js`는 이더리움의 [`web3.js`](https://web3js.readthedocs.io/en/1.0/)와 같이 프론트엔드에서 네뷸러스 노드와 상호작용할 수 있도록 만들어놓은 라이브러리입니다. 주로 위에서 개발한 스마트 컨트랙트의 함수를 호출해서 투표 아이템을 등록하고 조회하는 등의 기능에 사용할 것입니다.

알아둬야할 것은 `enroll`, `vote`, `delete`와 같이 데이터에 변화를 주는 함수들은 트랜잭션을 전송해야하기 때문에 트랜잭션 수수료를 지불하여 트랜잭션을 전송해야 합니다. 또한, `get`, `getVotingList`와 같이 데이터를 조회하는 함수들은 단지 호출만 하면 되므로 트랜잭션을 보낼 필요가 없습니다.

완성된 DApp의 링크입니다: [Votestagram](https://vote.nasd.app/)

